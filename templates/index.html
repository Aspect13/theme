{% set state = tools.auth.make_request_state() %}
{% set _ = state._context.update(g.__dict__) %}

{% include 'theme:part/head.html' %}
<title>{% block title %}{{ title }}{% endblock %} - Centry</title>
</head>
{% with user = tools.auth.current_user() %}
    {% include 'theme:part/google_analytics.html' %}
{% endwith %}
<body>

<div id="vue_mountpoint">
    {% block all_content %}
        {% include 'theme:part/navbar.html' %}
        {% block content %}
            {{ template_slot('content', state) | safe }}
            {% if prefix %}{{ template_slot('%scontent' | format(prefix), state) | safe }}{% endif %}
        {% endblock %}
    {% endblock %}
</div>

{% block all_scripts %}
    {% include 'theme:part/foot.html' %}
    <script>
        window.socket = io("/", {
            path: "{{ url_for('theme.socketio') }}"
        });
        {% if g.project %}
        activeProject.set_local('{{ g.project.id | default(None | tojson) }}');
        {% endif %}
    </script>
    <!-- Vue Application Root -->
    <script src="{{ url_for('theme.static', filename='js/vue_app.js') }}"></script>

    <!-- Nav bar -->
    <script src="{{ url_for('theme.static', filename='js/navbar.js') }}"></script>
    <!-- Custom scripts-->
    <script src="{{ url_for('theme.static', filename='js/alert_bar.js') }}"></script>


    <script src="{{ url_for('design-system.static', filename='assets/js/vue_components/TableCard.js') }}"></script>

    {% block scripts %}
        {{ template_slot('scripts', state) | safe }}
        {% if prefix %}{{ template_slot('%sscripts' | format(prefix), state) | safe }}{% endif %}
    {% endblock %}
{% endblock %}

</body>
</html>
